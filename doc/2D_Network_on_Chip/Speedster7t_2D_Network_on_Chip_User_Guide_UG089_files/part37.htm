<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Packet Mode</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part36.htm">&lt; Previous</a><span> | </span><a href="../Speedster7t_2D_Network_on_Chip_User_Guide_UG089.html">Contents</a><span> | </span><a href="part38.htm">Next &gt;</a></p><p class="s17" style="padding-top: 11pt;padding-left: 6pt;text-indent: 0pt;text-align: left;"><a name="bookmark69">&zwnj;</a>Packet Mode<a name="bookmark78">&zwnj;</a></p><p style="padding-top: 4pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">The 2D NoC rearranges the 1024-bit data bus into either four (400GE) or two (200GE) narrower data paths, funneling a separate packet to each of the four (or two) NAPs and splitting the full 1024-bit data bus into either four 256-bit (32-byte) or two 256-bit (32-byte) data paths. This solution results in less congestion in the fabric because the user logic can reside in multiple separate engines distributed down the 2D NoC columns rather than a single large engine immediately next to the Ethernet subsystem. This mode also reduces the needed frequency in the FPGA fabric design and makes the design easier because each NAP can have its own individual packet processing engine.</p><p style="padding-top: 5pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Packet mode can result in larger latency as each packet can take more cycles to transfer. Importantly, packets can arrive out of order, with the 2D NoC sending a sequence number along with each packet. The user logic is responsible for reordering the packets, if necessary, in order to retrieve the original data sequence. The following figure shows how the Ethernet subsystem data bus is rearranged into four separate 256-bit wide data buses for 400G mode. Each packet can take multiple cycles to complete. In 200G mode, the subsystem data bus is rearranged into two separate 256-bit data buses. However, the same principles of a sequence number, and additional latency apply.</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 52pt;text-indent: 0pt;text-align: left;"><span><img width="555" height="240" alt="image" src="Image_051.png"/></span></p><p class="s14" style="padding-top: 6pt;padding-left: 30pt;text-indent: 0pt;text-align: center;">Figure 14: <span class="h4">Data Bus Rearrangement for Packet Mode</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s16" style="padding-left: 6pt;text-indent: 0pt;text-align: left;"><a href="https://www.achronix.com/documentation/speedster7t-ethernet-user-guide-ug097" class="s3" target="_blank">The four packets shown above are sent to four separate NAPs distributed down the designated 2D NoC columns. Each NAP can communicate with an individual packet processing engine. This arrangement allows each NAP and processing engine to be run at a lower frequency than that required of a single processing engine with the full 1024-bit bus, thus simplifying the system design. For example, a single processing engine for a 400GE solution would require a 1024-bit bus running at approximately 728 MHz, whereas the packet mode for 400GE uses four NAPs and requires four 256-bit buses running at 507 MHz. The 2D NoC automatically handles the load balancing, sending the next available packet to the next free NAP. For more details on Ethernet packet mode, refer to the </a><a href="https://www.achronix.com/documentation/speedster7t-ethernet-user-guide-ug097" class="s21" target="_blank">Speedster7t Ethernet User Guide </a>(UG097)<span style=" color: #303030;">.</span></p><p style="padding-top: 5pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">In the following figure, the four NAPs are distributed in different locations along two columns. The specific placement of the NAPs is a design choice. It is equally possible to have all four NAPs located on a single column, or grouped closer together.</p><p style="padding-top: 2pt;text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 42pt;text-indent: 0pt;text-align: left;"><span><img width="572" height="494" alt="image" src="Image_052.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s14" style="padding-left: 30pt;text-indent: 0pt;text-align: center;">Figure 15: <span class="h4">Ethernet Packet Mode on the 2D NoC</span></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part36.htm">&lt; Previous</a><span> | </span><a href="../Speedster7t_2D_Network_on_Chip_User_Guide_UG089.html">Contents</a><span> | </span><a href="part38.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
