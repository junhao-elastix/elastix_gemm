<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Transaction Arbitration</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part25.htm">&lt; Previous</a><span> | </span><a href="../Speedster7t_2D_Network_on_Chip_User_Guide_UG089.html">Contents</a><span> | </span><a href="part27.htm">Next &gt;</a></p><p class="s17" style="padding-top: 11pt;padding-left: 6pt;text-indent: 0pt;text-align: left;"><a name="bookmark42">&zwnj;</a>Transaction Arbitration<a name="bookmark52">&zwnj;</a></p><p style="padding-top: 4pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">The 2D NoC also handles transaction arbitration internally, and interleaves traffic from AXI transactions, Ethernet packets, and/or data streaming. This arbitration not only keeps traffic moving and prevents backups, but also keeps the 2D NoC operating at its peak capacity. The rows and columns use a configurable, round-robin arbitration scheme where the arbitration schedule can be configured at each NAP. The schedule values are passed via parameters when the NAP is instantiated and remain static after configuration of the fabric. For the NAPs on columns, there is a parameter for the north-to-south direction as well as the south-to-north direction.</p><p style="padding-left: 6pt;text-indent: 0pt;text-align: left;">Similarly, the rows have a parameter for the east-to-west direction as well as west-to-east.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 6pt;text-indent: 0pt;text-align: left;">Each arbitration parameter consists of a 32-bit value used to initialize the arbitration schedule mechanism. Bit 0 of the arbitration schedule vector is used to determine if the local NAP transaction entering the 2D NoC wins arbitration when there is competing traffic from the upstream NAP on the row or column. If bit 0 has a value of <span class="s19">1</span>, the local traffic entering the 2D NoC wins, while if <span class="s19">0</span>, the upstream transaction on the row or column wins. After each 2D NoC clock cycle where both the local transaction and the upstream transaction are competing for access, the value in the schedule register rotates to the left. For example, a value of <span class="s19">32&#39;hAAAA_AAAA </span>means that the local NAP transaction has high priority on every second 2D NoC cycle.</p><p class="s16" style="padding-top: 5pt;padding-left: 6pt;text-indent: 0pt;text-align: left;"><a href="https://www.achronix.com/documentation/speedster7t-component-library-user-guide-ug086" class="s3" target="_blank">ACE chooses default values for the arbitration schedule to create fairness on the rows and columns, but those values can be overridden if a particular NAP needs to have higher priority in a design. It is recommended that the arbitration schedule values are not overridden, as the default values set fairness for all NAPs on a row or column. The default value for each NAP is based on the number of instantiated NAPs along a row or column, and the location of the particular NAP. The formula used for the values on each row or column that instantiates N number of NAPs is 1/N for the last NAP in that direction, 1/(N-1) to next upstream NAP, and so on until the first instantiated NAP in the row or column. For example, if three NAPs are on a row, the westernmost NAP has priority every third cycle, the next upstream NAP has priority every second cycle, and the easternmost NAP always has priority as there are no further competing NAPs in the east-to-west direction. Both ACE and the simulation environment enforce the default arbitration value unless explicitly overridden by a user value. For more information on the arbitration schedules, refer to the &quot;Speedster7t Network on Chip Primitives&quot; chapter in the </a><a href="https://www.achronix.com/documentation/speedster7t-component-library-user-guide-ug086" class="s21" target="_blank">Speedster7t Component Library User Guide </a>(UG086)<span style=" color: #303030;">.</span></p><p style="padding-top: 12pt;text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="672" height="88" alt="image" src="Image_038.png"/></span></p><div class="textbox" style="border:0.8pt solid #9EB6D3;display:block;min-height:65.3pt;width:503.2pt;"><p class="s22" style="padding-top: 4pt;padding-left: 30pt;text-indent: 0pt;text-align: left;">Note</p><p class="s23" style="padding-top: 6pt;padding-left: 30pt;text-indent: 0pt;text-align: left;">Achronix is aware of the use of historical terms within this document with regards to initiator and responder logic. Achronix is working hard to remove all such references from within its code base and documentation.</p></div><p style="text-indent: 0pt;text-align: left;"/><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part25.htm">&lt; Previous</a><span> | </span><a href="../Speedster7t_2D_Network_on_Chip_User_Guide_UG089.html">Contents</a><span> | </span><a href="part27.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
