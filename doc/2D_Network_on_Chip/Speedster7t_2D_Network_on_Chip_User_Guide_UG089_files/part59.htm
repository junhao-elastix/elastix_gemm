<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>NAP Buffering</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part58.htm">&lt; Previous</a><span> | </span><a href="../Speedster7t_2D_Network_on_Chip_User_Guide_UG089.html">Contents</a><span> | </span><a href="part60.htm">Next &gt;</a></p><p class="s17" style="padding-left: 6pt;text-indent: 0pt;text-align: left;"><a name="bookmark114">&zwnj;</a>NAP Buffering<a name="bookmark123">&zwnj;</a></p><p style="padding-top: 4pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">Each NAP contains two asynchronous FIFO buffers, one in each 2D NoC direction. These support the buffering of data as it is transferred between the user design clock domain, and the 2D NoC clock domain. For horizontal and AXI responder NAPs, the east to west and west to east buffers are 16 entries deep. For vertical, AXI initiator and Ethernet NAPs, the south to north buffers are 16 entries deep, however the north to south buffers are only 4 entries deep.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="672" height="187" alt="image" src="Image_096.png"/></span></p><div class="textbox" style="border:0.8pt solid #9EB6D3;display:block;min-height:139.6pt;width:503.2pt;"><p class="s22" style="padding-top: 4pt;padding-left: 30pt;text-indent: 0pt;text-align: left;">Note</p><p class="s23" style="padding-top: 6pt;padding-left: 30pt;text-indent: 0pt;text-align: left;">The buffers in each NAP are designed to absorb traffic from the 2D NoC, and to support CDC crossing from the 2D NoC clock and the user design clock. They should not be used, by design, to store incoming transactions or data. In this scenario, it is possible for the buffers to fill, and then back- pressure their respective row or column.</p><p class="s23" style="padding-top: 2pt;padding-left: 30pt;text-indent: 0pt;text-align: left;">User designs should ensure that they are able to service any read or write request from a NAP in a timely manner. For example, a PCIe DMA transaction may issue multiple read requests. The user design NAP receiving these read requests should accept them from the NAP as they arrive, even if the user logic is not yet able to service the read request. The read requests can then be processed by the user logic and responses returned in due course.</p></div><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 5pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">As the ratio of the user design and 2D NoC clock domains can span a wide variance, it is possible that for certain combinations of the two clocks, traffic throughput can be impacted, particularly by the shallow north to south buffers, as clock domain crossing of the data is performed.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part58.htm">&lt; Previous</a><span> | </span><a href="../Speedster7t_2D_Network_on_Chip_User_Guide_UG089.html">Contents</a><span> | </span><a href="part60.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
