<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Port Binding File to DSM Interfaces</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part146.htm">&lt; Previous</a><span> | </span><a href="../Speedster7t_GDDR6_Reference_Design_Guide_RD017.html">Contents</a><span> | </span><a href="part148.htm">Next &gt;</a></p><p class="s9" style="padding-top: 14pt;padding-left: 11pt;text-indent: 0pt;text-align: left;"><a name="bookmark152">&zwnj;</a>Port Binding File to DSM Interfaces</p><p style="padding-top: 7pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">To use the port binding file, configure the following in the testbench:</p><p style="padding-top: 6pt;padding-left: 18pt;text-indent: 0pt;text-align: left;">1. Create an ACE project (a netlist is not required at this stage).</p><p style="padding-top: 4pt;padding-left: 17pt;text-indent: 0pt;text-align: left;">2. Configure all interface subsystem IP.</p><p style="padding-top: 4pt;padding-left: 17pt;text-indent: 0pt;text-align: left;">3. Generate the subsystem IP files, including a file named</p><p style="text-indent: 0pt;text-align: left;"><span><img width="352" height="21" alt="image" src="Image_833.png"/></span></p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">&lt;design_name&gt;_user_design_port_bindings.svh</p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">&lt;design_name&gt;_user_design_port_bindings.svh</p><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">&lt;design_name&gt;_user_design_port_bindings.svh</p><p style="padding-top: 4pt;padding-left: 295pt;text-indent: 0pt;text-align: left;">.</p><p style="padding-top: 6pt;padding-left: 31pt;text-indent: -13pt;text-align: left;">4. Declare the signals in the testbench. The signal names must be the same as the port names on the DUT since these are the names that the port binding file uses.</p><p style="padding-top: 4pt;padding-left: 17pt;text-indent: 0pt;text-align: left;">5. Include the port binding file in the testbench.</p><p style="padding-top: 4pt;padding-left: 31pt;text-indent: -14pt;text-align: left;">6. Instruct the DSM to set all its DC Interfaces to be in monitor mode only. The latter is important because without this, the DSM drives the ports from the fabric to the subsystems in addition to the DUT driving the same ports via the binding file. This situation can lead to unresolved signals and simulation failure. The DSM</p><p style="text-indent: 0pt;text-align: left;"><span><img width="280" height="21" alt="image" src="Image_834.png"/></span></p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">ACX_DSM_INTERFACES_TO_MONITOR_MODE</p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">ACX_DSM_INTERFACES_TO_MONITOR_MODE</p><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">ACX_DSM_INTERFACES_TO_MONITOR_MODE</p><p style="padding-top: 3pt;padding-left: 31pt;text-indent: 0pt;line-height: 117%;text-align: left;">DC interfaces are set to monitor mode when the define                         is enabled.</p><p style="padding-top: 11pt;text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="658" height="153" alt="image" src="Image_835.png"/></span></p><p class="s46" style="text-indent: 0pt;text-align: left;">system_files_bfm.f</p><p class="s46" style="text-indent: 0pt;text-align: left;">system_files_bfm.f</p><p style="text-indent: 0pt;text-align: left;"/><p class="s46" style="text-indent: 0pt;text-align: left;">system_files_bfm.f</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">#</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 118%;text-align: left;"># Description : DSM full-chip BFM simulation filelist #</p><p class="s27" style="text-indent: 0pt;line-height: 10pt;text-align: left;"># Set whether the DSM DCI interfaces are set to monitor mode only</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 10pt;text-align: left;">+define+ACX_DSM_INTERFACES_TO_MONITOR_MODE</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">#</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 118%;text-align: left;"># Description : DSM full-chip BFM simulation filelist #</p><p class="s27" style="text-indent: 0pt;line-height: 10pt;text-align: left;"># Set whether the DSM DCI interfaces are set to monitor mode only</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 10pt;text-align: left;">+define+ACX_DSM_INTERFACES_TO_MONITOR_MODE</p><p style="text-indent: 0pt;text-align: left;"/><p class="s27" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">#</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 118%;text-align: left;"># Description : DSM full-chip BFM simulation filelist #</p><p class="s27" style="text-indent: 0pt;line-height: 10pt;text-align: left;"># Set whether the DSM DCI interfaces are set to monitor mode only</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 10pt;text-align: left;">+define+ACX_DSM_INTERFACES_TO_MONITOR_MODE</p><p style="text-indent: 0pt;text-align: left;"><span><img width="658" height="298" alt="image" src="Image_836.png"/></span></p><p class="s46" style="text-indent: 0pt;text-align: left;">Testbench</p><p class="s46" style="text-indent: 0pt;text-align: left;">Testbench</p><p style="text-indent: 0pt;text-align: left;"/><p class="s46" style="text-indent: 0pt;text-align: left;">Testbench</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">// In the testbench</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">// Declare ALL the DUT signals</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">logic dut_awready, dut_awvalid   ;</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="text-indent: 0pt;text-align: left;">// Include the port binding file</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">`include &quot;../../src/ioring/my_design_user_design_port_bindings.svh&quot;</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 21pt;text-indent: -21pt;line-height: 118%;text-align: left;">// Instantiate the DUT my_design DUT (</p><p class="s27" style="padding-left: 43pt;text-indent: 0pt;line-height: 10pt;text-align: left;">......</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">.dut_awready (dut_awready),</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">.dut_awvalid (dut_awvalid),</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">......</p><p class="s27" style="padding-top: 1pt;padding-left: 21pt;text-indent: 0pt;line-height: 10pt;text-align: left;">);</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">// In the testbench</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">// Declare ALL the DUT signals</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">logic dut_awready, dut_awvalid   ;</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="text-indent: 0pt;text-align: left;">// Include the port binding file</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">`include &quot;../../src/ioring/my_design_user_design_port_bindings.svh&quot;</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 21pt;text-indent: -21pt;line-height: 118%;text-align: left;">// Instantiate the DUT my_design DUT (</p><p class="s27" style="padding-left: 43pt;text-indent: 0pt;line-height: 10pt;text-align: left;">......</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">.dut_awready (dut_awready),</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">.dut_awvalid (dut_awvalid),</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">......</p><p class="s27" style="padding-top: 1pt;padding-left: 21pt;text-indent: 0pt;line-height: 10pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"/><p class="s27" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">// In the testbench</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">// Declare ALL the DUT signals</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">logic dut_awready, dut_awvalid   ;</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="text-indent: 0pt;text-align: left;">// Include the port binding file</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">`include &quot;../../src/ioring/my_design_user_design_port_bindings.svh&quot;</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 21pt;text-indent: -21pt;line-height: 118%;text-align: left;">// Instantiate the DUT my_design DUT (</p><p class="s27" style="padding-left: 43pt;text-indent: 0pt;line-height: 10pt;text-align: left;">......</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">.dut_awready (dut_awready),</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">.dut_awvalid (dut_awvalid),</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">......</p><p class="s27" style="padding-top: 1pt;padding-left: 21pt;text-indent: 0pt;line-height: 10pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><span><img width="658" height="236" alt="image" src="Image_837.png"/></span></p><p class="s3" style="text-indent: 0pt;line-height: 12pt;text-align: left;"></p><p class="s3" style="text-indent: 0pt;line-height: 12pt;text-align: left;"></p><p style="text-indent: 0pt;text-align: left;"/><p class="s3" style="text-indent: 0pt;line-height: 12pt;text-align: left;"></p><h2 style="text-indent: 0pt;line-height: 10pt;text-align: left;">Notes</h2><h2 style="text-indent: 0pt;line-height: 10pt;text-align: left;">Notes</h2><p style="text-indent: 0pt;text-align: left;"/><h2 style="text-indent: 0pt;line-height: 10pt;text-align: left;">Notes</h2><p style="padding-left: 8pt;text-indent: -8pt;line-height: 138%;text-align: justify;">• In the Achronix reference design flow the generated subsystem IP files are saved to the <span class="s8">/src/ ioring </span>directory rather than the default <span class="s8">/src/ace/ioring_design </span>directory.</p><p style="padding-top: 4pt;padding-left: 8pt;text-indent: -8pt;line-height: 106%;text-align: justify;">• The define <span class="s8">ACX_DSM_INTERFACES_TO_MONITOR_MODE </span>must be included in the simulation command line, so that it is present when the DSM is compiled. It cannot be included in the user testbench as this is compiled <span class="s47">after </span>the DSM.</p><p style="padding-top: 2pt;padding-left: 8pt;text-indent: -8pt;line-height: 17pt;text-align: left;">• In the provided Achronix reference design flow, <span class="s8">ACX_DSM_INTERFACES_TO_MONITOR_MODE </span>is defined in the <span class="s8">/sim/&lt;simulator&gt;/system_files_bfm.f </span>and <span class="s8">/sim/&lt;simulator&gt;/ system_files_rtl.f </span>files.</p><p style="padding-left: 8pt;text-indent: -8pt;line-height: 138%;text-align: justify;">• In the Achronix reference design flow the generated subsystem IP files are saved to the <span class="s8">/src/ ioring </span>directory rather than the default <span class="s8">/src/ace/ioring_design </span>directory.</p><p style="padding-top: 4pt;padding-left: 8pt;text-indent: -8pt;line-height: 106%;text-align: justify;">• The define <span class="s8">ACX_DSM_INTERFACES_TO_MONITOR_MODE </span>must be included in the simulation command line, so that it is present when the DSM is compiled. It cannot be included in the user testbench as this is compiled <span class="s47">after </span>the DSM.</p><p style="padding-top: 2pt;padding-left: 8pt;text-indent: -8pt;line-height: 17pt;text-align: left;">• In the provided Achronix reference design flow, <span class="s8">ACX_DSM_INTERFACES_TO_MONITOR_MODE </span>is defined in the <span class="s8">/sim/&lt;simulator&gt;/system_files_bfm.f </span>and <span class="s8">/sim/&lt;simulator&gt;/ system_files_rtl.f </span>files.</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 8pt;text-indent: -8pt;line-height: 138%;text-align: justify;">• In the Achronix reference design flow the generated subsystem IP files are saved to the <span class="s8">/src/ ioring </span>directory rather than the default <span class="s8">/src/ace/ioring_design </span>directory.</p><p style="padding-top: 4pt;padding-left: 8pt;text-indent: -8pt;line-height: 106%;text-align: justify;">• The define <span class="s8">ACX_DSM_INTERFACES_TO_MONITOR_MODE </span>must be included in the simulation command line, so that it is present when the DSM is compiled. It cannot be included in the user testbench as this is compiled <span class="s47">after </span>the DSM.</p><p style="padding-top: 2pt;padding-left: 8pt;text-indent: -8pt;line-height: 17pt;text-align: left;">• In the provided Achronix reference design flow, <span class="s8">ACX_DSM_INTERFACES_TO_MONITOR_MODE </span>is defined in the <span class="s8">/sim/&lt;simulator&gt;/system_files_bfm.f </span>and <span class="s8">/sim/&lt;simulator&gt;/ system_files_rtl.f </span>files.</p><p style="padding-top: 2pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">The following example shows how to connect all of the DUT ports using the port binding file.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part146.htm">&lt; Previous</a><span> | </span><a href="../Speedster7t_GDDR6_Reference_Design_Guide_RD017.html">Contents</a><span> | </span><a href="part148.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
