<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>reg_lib_sim_generate</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part120.htm">&lt; Previous</a><span> | </span><a href="../Speedster7t_GDDR6_Reference_Design_Guide_RD017.html">Contents</a><span> | </span><a href="part122.htm">Next &gt;</a></p><p class="s9" style="padding-left: 11pt;text-indent: 0pt;text-align: left;"><a name="bookmark126">&zwnj;</a>reg_lib_sim_generate</p><p style="padding-top: 7pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">It is necessary for ACE to distinguish between a runtime programming script that is being executed in hardware (and so might need to open jtag ports, or poll for register responses) and a runtime programming script that is being used to create a simulation command file. In order to separate these two modes, an embedded variable in the</p><p style="text-indent: 0pt;text-align: left;"><span><img width="168" height="21" alt="image" src="Image_711.png"/></span></p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">reg_lib_sim_generate</p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">reg_lib_sim_generate</p><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">reg_lib_sim_generate</p><p style="padding-top: 3pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">device register library is used:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="168" height="21" alt="image" src="Image_712.png"/></span></p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">reg_lib_sim_generate</p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">reg_lib_sim_generate</p><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">reg_lib_sim_generate</p><p style="padding-left: 11pt;text-indent: 0pt;line-height: 117%;text-align: left;">When ACE is running against hardware, executed directly in the ACE Tcl console.</p><p style="padding-top: 8pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">When ACE is executed in batch mode, using the</p><p style="padding-top: 3pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 78pt;text-indent: 0pt;text-align: left;">is not set, and the Tcl script commands are</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="32" height="21" alt="image" src="Image_713.png"/></span></p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">ace</p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">ace</p><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">ace</p><p style="padding-left: 11pt;text-indent: 0pt;text-align: left;">command from the previous example,</p><p style="text-indent: 0pt;text-align: left;"><span><img width="168" height="21" alt="image" src="Image_714.png"/></span></p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">reg_lib_sim_generate</p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">reg_lib_sim_generate</p><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">reg_lib_sim_generate</p><p style="padding-top: 5pt;padding-left: 11pt;text-indent: 128pt;line-height: 117%;text-align: left;">is set. ACE therefore translates the runtime programming script Tcl commands into equivalent simulation commands and writes these to the simulation command file.</p><p style="padding-top: 10pt;text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="168" height="21" alt="image" src="Image_715.png"/></span></p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">reg_lib_sim_generate</p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">reg_lib_sim_generate</p><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">reg_lib_sim_generate</p><p style="padding-left: 11pt;text-indent: 0pt;text-align: left;">If it is necessary for commands to vary between hardware and simulation (for example, in hardware it is possible to run extended tests with many millions of transactions which would be infeasible to simulate) then the</p><p style="text-indent: 0pt;text-align: left;"><span><img width="68" height="21" alt="image" src="Image_716.png"/></span></p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">&lt;device</p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">&lt;device</p><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">&lt;device</p><p style="text-indent: 0pt;text-align: left;"><span><img width="308" height="21" alt="image" src="Image_717.png"/></span></p><p class="s8" style="padding-top: 3pt;text-indent: 0pt;text-align: left;">namespace&gt;::get_reg_lib_sim_generate()</p><p class="s8" style="padding-top: 3pt;text-indent: 0pt;text-align: left;">namespace&gt;::get_reg_lib_sim_generate()</p><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 3pt;text-indent: 0pt;text-align: left;">namespace&gt;::get_reg_lib_sim_generate()</p><p style="padding-top: 3pt;padding-left: 11pt;text-indent: 128pt;line-height: 149%;text-align: left;">variable can be used within the runtime programming script to select separate hardware and simulation control flows. The state of the variable can be read using the Tcl function,</p><p style="text-indent: 0pt;text-align: left;"><span><img width="658" height="174" alt="image" src="Image_718.png"/></span></p><p style="padding-top: 2pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 11pt;text-indent: 0pt;line-height: 118%;text-align: left;"># Use function get_reg_lib_sim_generate to determine if this script is being run under hardware or simulation</p><p class="s27" style="padding-left: 32pt;text-indent: -21pt;line-height: 118%;text-align: left;">if { ![ac7t1500::get_reg_lib_sim_generate] } { # Hardware test - test 10M packets</p><p class="s27" style="padding-left: 32pt;text-indent: 0pt;line-height: 10pt;text-align: left;">set num_pkts 10000000</p><p class="s27" style="padding-top: 1pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">} else {</p><p class="s27" style="padding-top: 1pt;padding-left: 32pt;text-indent: 0pt;line-height: 118%;text-align: left;"># Simulation test - test 1000 packets set num_pkts 1000</p><p class="s27" style="padding-left: 11pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p style="padding-top: 2pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 11pt;text-indent: 0pt;line-height: 118%;text-align: left;"># Use function get_reg_lib_sim_generate to determine if this script is being run under hardware or simulation</p><p class="s27" style="padding-left: 32pt;text-indent: -21pt;line-height: 118%;text-align: left;">if { ![ac7t1500::get_reg_lib_sim_generate] } { # Hardware test - test 10M packets</p><p class="s27" style="padding-left: 32pt;text-indent: 0pt;line-height: 10pt;text-align: left;">set num_pkts 10000000</p><p class="s27" style="padding-top: 1pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">} else {</p><p class="s27" style="padding-top: 1pt;padding-left: 32pt;text-indent: 0pt;line-height: 118%;text-align: left;"># Simulation test - test 1000 packets set num_pkts 1000</p><p class="s27" style="padding-left: 11pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 2pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 11pt;text-indent: 0pt;line-height: 118%;text-align: left;"># Use function get_reg_lib_sim_generate to determine if this script is being run under hardware or simulation</p><p class="s27" style="padding-left: 32pt;text-indent: -21pt;line-height: 118%;text-align: left;">if { ![ac7t1500::get_reg_lib_sim_generate] } { # Hardware test - test 10M packets</p><p class="s27" style="padding-left: 32pt;text-indent: 0pt;line-height: 10pt;text-align: left;">set num_pkts 10000000</p><p class="s27" style="padding-top: 1pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">} else {</p><p class="s27" style="padding-top: 1pt;padding-left: 32pt;text-indent: 0pt;line-height: 118%;text-align: left;"># Simulation test - test 1000 packets set num_pkts 1000</p><p class="s27" style="padding-left: 11pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p style="padding-left: 242pt;text-indent: 0pt;text-align: left;">, as in the following example.</p><p style="padding-top: 1pt;text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part120.htm">&lt; Previous</a><span> | </span><a href="../Speedster7t_GDDR6_Reference_Design_Guide_RD017.html">Contents</a><span> | </span><a href="part122.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
