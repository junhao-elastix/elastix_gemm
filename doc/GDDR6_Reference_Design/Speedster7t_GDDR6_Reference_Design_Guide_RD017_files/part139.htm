<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Example Design</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part138.htm">&lt; Previous</a><span> | </span><a href="../Speedster7t_GDDR6_Reference_Design_Guide_RD017.html">Contents</a><span> | </span><a href="part140.htm">Next &gt;</a></p><p class="s7" style="padding-left: 11pt;text-indent: 0pt;text-align: left;"><a name="bookmark144">&zwnj;</a>Example Design</p><p class="s6" style="padding-top: 7pt;padding-left: 11pt;text-indent: 0pt;text-align: left;"><a href="part139.htm#bookmark162" class="a">An example structure of a user testbench, instantiating both the DSM and the user design under test is shown in the following </a>diagram<a href="part142.htm#bookmark164" class="a">. This example shows the macros required for the responder NAPs, and the DCIs for two instances of the GDDR6 subsystem. For other forms of NAPs, or for other DCI types, such as DDR, consult the </a><a href="part142.htm#bookmark164" class="s5">Bind Macros </a><a href="part145.htm#bookmark165" class="a">and </a><a href="part142.htm#bookmark164" class="s5">DSM Direct-Connect Interfaces </a><a href="part142.htm#bookmark164">tables.</a></p><p style="padding-top: 11pt;text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 70pt;text-indent: 0pt;text-align: left;"><span><img width="500" height="318" alt="image" src="Image_769.png"/></span></p><p style="padding-top: 2pt;text-indent: 0pt;text-align: left;"><br/></p><h1 style="padding-left: 5pt;text-indent: 0pt;text-align: center;"><a name="bookmark162">&zwnj;</a>Figure 17 • Example Simulation Structure</h1><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="64" height="21" alt="image" src="Image_770.png"/></span></p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">my_nap1</p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">my_nap1</p><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">my_nap1</p><p style="text-indent: 0pt;text-align: left;"><span><img width="72" height="21" alt="image" src="Image_771.png"/></span></p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">my_dc0_1</p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">my_dc0_1</p><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">my_dc0_1</p><p style="text-indent: 0pt;text-align: left;"><span><img width="72" height="21" alt="image" src="Image_772.png"/></span></p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">my_dc0_2</p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">my_dc0_2</p><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">my_dc0_2</p><p style="padding-top: 3pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">In the previous example, there are two NAPs,</p><p style="padding-top: 3pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">and</p><p style="padding-top: 3pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">. In addition, there are two direct-connect</p><p style="text-indent: 0pt;text-align: left;"><span><img width="64" height="21" alt="image" src="Image_773.png"/></span></p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">my_nap2</p><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">my_nap2</p><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">my_nap2</p><p style="padding-top: 5pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">interfaces,</p><p style="padding-top: 5pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">and</p><p style="padding-top: 5pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">. In the top-level, testbench bindings are made between the NAPs in the</p><p style="padding-top: 2pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">design and the NAPs within the device using the ACX_BIND_NAP_RESPONDER macro:</p><p style="padding-top: 6pt;padding-left: 31pt;text-indent: -8pt;text-align: left;">• This macro supports inserting the coordinates of the NAP within the 2D NoC in order that the simulation is aligned with physical placement of the NAP on silicon.</p><p style="padding-top: 4pt;padding-left: 31pt;text-indent: -8pt;text-align: left;">• The DCIs are ports on the user design. These ports are assigned to the appropriate signals within the device direct-connect SystemVerilog interface.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="658" height="175" alt="image" src="Image_774.png"/></span></p><p style="padding-top: 1pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 31pt;text-indent: 0pt;text-align: left;">//</p><p class="s27" style="padding-top: 1pt;padding-left: 31pt;text-indent: 0pt;text-align: left;">// Instantiate the DSM</p><p class="s27" style="padding-top: 1pt;padding-left: 31pt;text-indent: 0pt;text-align: left;">//</p><p class="s27" style="padding-top: 1pt;padding-left: 31pt;text-indent: 0pt;text-align: left;">// Connect the chip ready port</p><p class="s27" style="padding-top: 1pt;padding-left: 31pt;text-indent: 0pt;text-align: left;">// Note : All DSM ports are defined, so can be directly connected if required</p><p class="s27" style="padding-top: 1pt;padding-left: 31pt;text-indent: 0pt;text-align: left;">`ACX_DEVICE_NAME `ACX_DEVICE_NAME( .FCU_CONFIG_USER_MODE (chip_ready ) );</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 31pt;text-indent: 0pt;text-align: left;">// Set the verbosity options on the messages</p><p class="s27" style="padding-left: 31pt;text-indent: 0pt;line-height: 12pt;text-align: left;">// Use the inbuilt set_verbosity() task. initial begin</p><p style="padding-top: 1pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 31pt;text-indent: 0pt;text-align: left;">//</p><p class="s27" style="padding-top: 1pt;padding-left: 31pt;text-indent: 0pt;text-align: left;">// Instantiate the DSM</p><p class="s27" style="padding-top: 1pt;padding-left: 31pt;text-indent: 0pt;text-align: left;">//</p><p class="s27" style="padding-top: 1pt;padding-left: 31pt;text-indent: 0pt;text-align: left;">// Connect the chip ready port</p><p class="s27" style="padding-top: 1pt;padding-left: 31pt;text-indent: 0pt;text-align: left;">// Note : All DSM ports are defined, so can be directly connected if required</p><p class="s27" style="padding-top: 1pt;padding-left: 31pt;text-indent: 0pt;text-align: left;">`ACX_DEVICE_NAME `ACX_DEVICE_NAME( .FCU_CONFIG_USER_MODE (chip_ready ) );</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 31pt;text-indent: 0pt;text-align: left;">// Set the verbosity options on the messages</p><p class="s27" style="padding-left: 31pt;text-indent: 0pt;line-height: 12pt;text-align: left;">// Use the inbuilt set_verbosity() task. initial begin</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 1pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 31pt;text-indent: 0pt;text-align: left;">//</p><p class="s27" style="padding-top: 1pt;padding-left: 31pt;text-indent: 0pt;text-align: left;">// Instantiate the DSM</p><p class="s27" style="padding-top: 1pt;padding-left: 31pt;text-indent: 0pt;text-align: left;">//</p><p class="s27" style="padding-top: 1pt;padding-left: 31pt;text-indent: 0pt;text-align: left;">// Connect the chip ready port</p><p class="s27" style="padding-top: 1pt;padding-left: 31pt;text-indent: 0pt;text-align: left;">// Note : All DSM ports are defined, so can be directly connected if required</p><p class="s27" style="padding-top: 1pt;padding-left: 31pt;text-indent: 0pt;text-align: left;">`ACX_DEVICE_NAME `ACX_DEVICE_NAME( .FCU_CONFIG_USER_MODE (chip_ready ) );</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 31pt;text-indent: 0pt;text-align: left;">// Set the verbosity options on the messages</p><p class="s27" style="padding-left: 31pt;text-indent: 0pt;line-height: 12pt;text-align: left;">// Use the inbuilt set_verbosity() task. initial begin</p><p style="padding-left: 11pt;text-indent: 0pt;text-align: left;">The Verilog code to instantiate the example, based on using the Speedster7t AC7t1500 FPGA, follows.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 65pt;text-indent: 0pt;text-align: left;">`ACX_DEVICE_NAME.set_verbosity(2);</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">end</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 43pt;text-indent: 0pt;text-align: left;">//</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">// Bind NAPs</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">//</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">// Bind my_nap1 to location 4,5</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">`ACX_BIND_NAP_AXI_RESPONDER(dut.my_nap1,4,5);</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">// Bind my_nap2 to location 2,2</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">`ACX_BIND_NAP_AXI_RESPONDER(dut.my_nap2,2,2);</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 43pt;text-indent: 0pt;text-align: left;">//</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">// Connect to DC interfaces</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">//</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;line-height: 118%;text-align: left;">// Create signals to attach to direct-connect interface logic           my_dc0_1_clk;</p><p class="s27" style="padding-left: 43pt;text-indent: 0pt;line-height: 10pt;text-align: left;">logic           my_dc0_1_awvalid;</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">logic           my_dc0_1_awaddr;</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">logic           my_dc0_1_awready;</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">.....</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">logic           my_dc0_2_clk;</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">logic           my_dc0_2_awvalid;</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">logic           my_dc0_2_awaddr;</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">logic           my_dc0_2_awready;</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">.....</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 43pt;text-indent: 0pt;text-align: left;">// Connect signals to gddr6_xx_dc0 interface within ac7t1500 device</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">// Inputs to device</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;line-height: 118%;text-align: left;">assign `ACX_DEVICE_NAME.gddr6_xx_dc0.awvalid = my_dc0_1_awvalid; assign `ACX_DEVICE_NAME.gddr6_xx_dc0.awaddr  = my_dc0_1_awaddr;</p><p class="s27" style="padding-left: 43pt;text-indent: 0pt;line-height: 10pt;text-align: left;">....</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">// Outputs from device</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">assign my_dc0_1_awready = `ACX_DEVICE_NAME.gddr6_xx_dc0.awready;</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">....</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 43pt;text-indent: 0pt;text-align: left;">// Connect signals to gddr6_xx_dc0 interface within ac7t1500 device</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">// Inputs to device</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;line-height: 118%;text-align: left;">assign `ACX_DEVICE_NAME.gddr6_yy_dc0.awvalid = my_dc0_2_awvalid; assign `ACX_DEVICE_NAME.gddr6_yy_dc0.awaddr  = my_dc0_2_awaddr;</p><p class="s27" style="padding-left: 43pt;text-indent: 0pt;line-height: 10pt;text-align: left;">....</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">// Outputs from device</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">assign my_dc0_2_awready = `ACX_DEVICE_NAME.gddr6_yy_dc0.awready;</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">....</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-left: 43pt;text-indent: 0pt;text-align: left;">//</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">// Remember to connect the clock!</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">//</p><p class="s27" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;line-height: 118%;text-align: left;">assign my_dc0_1_clk = `ACX_DEVICE_NAME.gddr6_xx_dc0.clk; assign my_dc0_2_clk = `ACX_DEVICE_NAME.gddr6_yy_dc0.clk;</p><p style="text-indent: 0pt;text-align: left;"><span><img width="658" height="799" alt="image" src="Image_775.png"/></span></p><p style="padding-top: 11pt;text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="658" height="181" alt="image" src="Image_776.png"/></span></p><p class="s3" style="text-indent: 0pt;line-height: 12pt;text-align: left;"></p><p class="s3" style="text-indent: 0pt;line-height: 12pt;text-align: left;"></p><p style="text-indent: 0pt;text-align: left;"/><p class="s3" style="text-indent: 0pt;line-height: 12pt;text-align: left;"></p><h2 style="text-indent: 0pt;line-height: 10pt;text-align: left;">Note</h2><p style="padding-top: 6pt;text-indent: 0pt;text-align: left;">When using bind macros, the column and row coordinates of the target NAP can be specified. To ensure consistency between simulation and silicon, add matching placement constraints to the ACE</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;">placement <span class="s8">.pdc </span>file, for example:</p><h2 style="padding-top: 1pt;text-indent: 0pt;text-align: left;">In simulation</h2><p class="s8" style="padding-top: 5pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">`ACX_BIND_NAP_AXI_RESPONDER(dut.my_nap1,4,5);</p><h2 style="padding-top: 1pt;text-indent: 0pt;text-align: left;">In place and route</h2><p class="s8" style="padding-top: 5pt;padding-left: 3pt;text-indent: 0pt;line-height: 11pt;text-align: left;">set_placement -fixed {i:my_nap} {s:x_core.NOC[4][5].logic.noc.nap_s}</p><h2 style="text-indent: 0pt;line-height: 10pt;text-align: left;">Note</h2><p style="padding-top: 6pt;text-indent: 0pt;text-align: left;">When using bind macros, the column and row coordinates of the target NAP can be specified. To ensure consistency between simulation and silicon, add matching placement constraints to the ACE</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;">placement <span class="s8">.pdc </span>file, for example:</p><h2 style="padding-top: 1pt;text-indent: 0pt;text-align: left;">In simulation</h2><p class="s8" style="padding-top: 5pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">`ACX_BIND_NAP_AXI_RESPONDER(dut.my_nap1,4,5);</p><h2 style="padding-top: 1pt;text-indent: 0pt;text-align: left;">In place and route</h2><p class="s8" style="padding-top: 5pt;padding-left: 3pt;text-indent: 0pt;line-height: 11pt;text-align: left;">set_placement -fixed {i:my_nap} {s:x_core.NOC[4][5].logic.noc.nap_s}</p><p style="text-indent: 0pt;text-align: left;"/><h2 style="text-indent: 0pt;line-height: 10pt;text-align: left;">Note</h2><p style="padding-top: 6pt;text-indent: 0pt;text-align: left;">When using bind macros, the column and row coordinates of the target NAP can be specified. To ensure consistency between simulation and silicon, add matching placement constraints to the ACE</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;">placement <span class="s8">.pdc </span>file, for example:</p><h2 style="padding-top: 1pt;text-indent: 0pt;text-align: left;">In simulation</h2><p class="s8" style="padding-top: 5pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">`ACX_BIND_NAP_AXI_RESPONDER(dut.my_nap1,4,5);</p><h2 style="padding-top: 1pt;text-indent: 0pt;text-align: left;">In place and route</h2><p class="s8" style="padding-top: 5pt;padding-left: 3pt;text-indent: 0pt;line-height: 11pt;text-align: left;">set_placement -fixed {i:my_nap} {s:x_core.NOC[4][5].logic.noc.nap_s}</p><p class="toc">&nbsp;</p><div class="toc"><a class="toc0" href="part140.htm">set_verbosity( ) Task</a></div><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part138.htm">&lt; Previous</a><span> | </span><a href="../Speedster7t_GDDR6_Reference_Design_Guide_RD017.html">Contents</a><span> | </span><a href="part140.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
