<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Runtime Programming Scripts</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part118.htm">&lt; Previous</a><span> | </span><a href="../Speedster7t_GDDR6_Reference_Design_Guide_RD017.html">Contents</a><span> | </span><a href="part120.htm">Next &gt;</a></p><p class="s9" style="padding-left: 11pt;text-indent: 0pt;text-align: left;"><a name="bookmark124">&zwnj;</a>Runtime Programming Scripts</p><p style="padding-top: 7pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">Simulation command files are generated from a runtime programming script. Runtime programming scripts are written in Tcl, and can be executed in the ACE Tcl console directly on the hardware. By using the same runtime programming script to generate the simulation command file, the same sequence of operations can be tested in both simulation and hardware.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="658" height="431" alt="image" src="Image_706.png"/></span></p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 118%;text-align: left;"># Include any utility files that may have common functions source AC7t1500_common_utils.tcl</p><p style="padding-top: 1pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="text-indent: 0pt;line-height: 118%;text-align: left;"># Define simulation command filename name and location. # Path is relative to this script location</p><p class="s27" style="text-indent: 0pt;line-height: 10pt;text-align: left;">set OUTPUT_FILENAME &quot;../../sim/&lt;simulation command filename&gt;.txt&quot;</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="text-indent: 0pt;text-align: left;"># Process any input arguments</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 118%;text-align: left;"># IMPORTANT : This must be included for the reg_lib_sim_generate option ac7t1500::process_args $argc $argv</p><p style="padding-top: 1pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="text-indent: 0pt;text-align: left;"># Open the simulation command file.</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 118%;text-align: left;"># File will only be created if not running under ACE # Pass script name, ($argv0), for header ac7t1500::open_command_file $OUTPUT_FILENAME $argv0</p><p style="padding-top: 1pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="text-indent: 0pt;text-align: left;"># When running under ACE, ensure jtag port is open</p><p class="s27" style="text-indent: 0pt;line-height: 12pt;text-align: left;"># When generating a simulation command file, this call is ignored. ac7t1500::open_jtag</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 118%;text-align: left;"># Include any utility files that may have common functions source AC7t1500_common_utils.tcl</p><p style="padding-top: 1pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="text-indent: 0pt;line-height: 118%;text-align: left;"># Define simulation command filename name and location. # Path is relative to this script location</p><p class="s27" style="text-indent: 0pt;line-height: 10pt;text-align: left;">set OUTPUT_FILENAME &quot;../../sim/&lt;simulation command filename&gt;.txt&quot;</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="text-indent: 0pt;text-align: left;"># Process any input arguments</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 118%;text-align: left;"># IMPORTANT : This must be included for the reg_lib_sim_generate option ac7t1500::process_args $argc $argv</p><p style="padding-top: 1pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="text-indent: 0pt;text-align: left;"># Open the simulation command file.</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 118%;text-align: left;"># File will only be created if not running under ACE # Pass script name, ($argv0), for header ac7t1500::open_command_file $OUTPUT_FILENAME $argv0</p><p style="padding-top: 1pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="text-indent: 0pt;text-align: left;"># When running under ACE, ensure jtag port is open</p><p class="s27" style="text-indent: 0pt;line-height: 12pt;text-align: left;"># When generating a simulation command file, this call is ignored. ac7t1500::open_jtag</p><p style="text-indent: 0pt;text-align: left;"/><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 118%;text-align: left;"># Include any utility files that may have common functions source AC7t1500_common_utils.tcl</p><p style="padding-top: 1pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="text-indent: 0pt;line-height: 118%;text-align: left;"># Define simulation command filename name and location. # Path is relative to this script location</p><p class="s27" style="text-indent: 0pt;line-height: 10pt;text-align: left;">set OUTPUT_FILENAME &quot;../../sim/&lt;simulation command filename&gt;.txt&quot;</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="text-indent: 0pt;text-align: left;"># Process any input arguments</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 118%;text-align: left;"># IMPORTANT : This must be included for the reg_lib_sim_generate option ac7t1500::process_args $argc $argv</p><p style="padding-top: 1pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="text-indent: 0pt;text-align: left;"># Open the simulation command file.</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 118%;text-align: left;"># File will only be created if not running under ACE # Pass script name, ($argv0), for header ac7t1500::open_command_file $OUTPUT_FILENAME $argv0</p><p style="padding-top: 1pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="text-indent: 0pt;text-align: left;"># When running under ACE, ensure jtag port is open</p><p class="s27" style="text-indent: 0pt;line-height: 12pt;text-align: left;"># When generating a simulation command file, this call is ignored. ac7t1500::open_jtag</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 118%;text-align: left;"># #</p><p class="s27" style="text-indent: 0pt;line-height: 10pt;text-align: left;">#</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 118%;text-align: left;"># #</p><p class="s27" style="text-indent: 0pt;line-height: 10pt;text-align: left;">#</p><p style="text-indent: 0pt;text-align: left;"/><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 118%;text-align: left;"># #</p><p class="s27" style="text-indent: 0pt;line-height: 10pt;text-align: left;">#</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Test code starts here</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Test code starts here</p><p style="text-indent: 0pt;text-align: left;"/><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Test code starts here</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">#</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">#</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#</p><p style="text-indent: 0pt;text-align: left;"/><p class="s27" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">#</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 10pt;text-align: left;">#</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Test code ends here</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Test code ends here</p><p style="text-indent: 0pt;text-align: left;"/><p class="s27" style="padding-top: 1pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Test code ends here</p><p style="padding-top: 6pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">There are a number of key sections to a runtime programming script. These are detailed as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 11pt;text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="658" height="220" alt="image" src="Image_707.png"/></span></p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">#</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="text-indent: 0pt;text-align: left;"># Close command file</p><p class="s27" style="text-indent: 0pt;line-height: 12pt;text-align: left;"># File will only exist when not running under ACE ac7t1500::close_command_file $OUTPUT_FILENAME</p><p class="s27" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">#</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="text-indent: 0pt;text-align: left;"># Close command file</p><p class="s27" style="text-indent: 0pt;line-height: 12pt;text-align: left;"># File will only exist when not running under ACE ac7t1500::close_command_file $OUTPUT_FILENAME</p><p style="text-indent: 0pt;text-align: left;"/><p class="s27" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">#</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="text-indent: 0pt;text-align: left;"># Close command file</p><p class="s27" style="text-indent: 0pt;line-height: 12pt;text-align: left;"># File will only exist when not running under ACE ac7t1500::close_command_file $OUTPUT_FILENAME</p><p class="s3" style="text-indent: 0pt;line-height: 12pt;text-align: left;"></p><p class="s3" style="text-indent: 0pt;line-height: 12pt;text-align: left;"></p><p style="text-indent: 0pt;text-align: left;"/><p class="s3" style="text-indent: 0pt;line-height: 12pt;text-align: left;"></p><h2 style="text-indent: 0pt;line-height: 10pt;text-align: left;">Note</h2><p class="s28" style="padding-top: 5pt;text-indent: 0pt;line-height: 128%;text-align: left;">The register library Tcl functions make use of a namespace, based on the device, in order to use common function names across multiple devices. The format of a command is <span class="s8">&lt;device</span></p><p class="s8" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">namespace&gt;::function() <span class="s28">. The previous example is for the Speedster7t AC7t1500 FPGA. When using a different device, change the namespace of the command to the respective desired device.</span></p><h2 style="text-indent: 0pt;line-height: 10pt;text-align: left;">Note</h2><p class="s28" style="padding-top: 5pt;text-indent: 0pt;line-height: 128%;text-align: left;">The register library Tcl functions make use of a namespace, based on the device, in order to use common function names across multiple devices. The format of a command is <span class="s8">&lt;device</span></p><p class="s8" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">namespace&gt;::function() <span class="s28">. The previous example is for the Speedster7t AC7t1500 FPGA. When using a different device, change the namespace of the command to the respective desired device.</span></p><p style="text-indent: 0pt;text-align: left;"/><h2 style="text-indent: 0pt;line-height: 10pt;text-align: left;">Note</h2><p class="s28" style="padding-top: 5pt;text-indent: 0pt;line-height: 128%;text-align: left;">The register library Tcl functions make use of a namespace, based on the device, in order to use common function names across multiple devices. The format of a command is <span class="s8">&lt;device</span></p><p class="s8" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">namespace&gt;::function() <span class="s28">. The previous example is for the Speedster7t AC7t1500 FPGA. When using a different device, change the namespace of the command to the respective desired device.</span></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part118.htm">&lt; Previous</a><span> | </span><a href="../Speedster7t_GDDR6_Reference_Design_Guide_RD017.html">Contents</a><span> | </span><a href="part120.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
