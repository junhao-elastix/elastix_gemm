<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Accessing the ACX_DEVICE_MANAGER with ACE</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part130.htm">&lt; Previous</a><span> | </span><a href="../Speedster7t_Soft_IP_User_Guide_UG103_3.html">Contents</a><span> | </span><a href="part132.htm">Next &gt;</a></p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark220">&zwnj;</a>Accessing the ACX_DEVICE_MANAGER with ACE<a name="bookmark246">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="665" height="157" alt="image" src="Image_773.png"/></span></p><p style="padding-top: 2pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s28" style="padding-left: 11pt;text-indent: 0pt;text-align: left;">1&gt; use_device_namespace ac7t1500</p><p class="s28" style="padding-top: 1pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">2&gt; use_acx_device_manager</p><p class="s28" style="padding-top: 1pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">3&gt; set_jtag_id</p><p class="s28" style="padding-top: 1pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">4&gt; open_jtag</p><p class="s28" style="padding-top: 1pt;padding-left: 11pt;text-indent: 0pt;line-height: 118%;text-align: left;">5&gt; program_hex_file &lt;design&gt;.hex 6&gt; # use commands, for instance 7&gt; package require mcu</p><p class="s28" style="padding-left: 11pt;text-indent: 0pt;line-height: 10pt;text-align: left;">8&gt; mcu_status</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="132" height="20" alt="image" src="Image_774.png"/></span></p><p style="padding-top: 5pt;padding-left: 5pt;text-indent: 0pt;line-height: 126%;text-align: left;">ACE has several Tcl commands that can be used to access the device manager via the JTAG interface. To enable these commands, use the command <span class="s29">package require mcu </span>. Before these commands can be used, the JTAG connection must be established, and the device must be programmed. A typical sequence of instructions follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">These commands are described in the following table:</p><p style="padding-top: 8pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s15" style="padding-bottom: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Table 40 â€¢ Device Manager JTAG Interface Tcl Command Details</p><table style="border-collapse:collapse;margin-left:6.065pt" cellspacing="0"><tr style="height:43pt"><td style="width:107pt;border-top-style:solid;border-top-width:1pt;border-top-color:#DDDDDD;border-left-style:solid;border-left-width:1pt;border-left-color:#DDDDDD;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#DDDDDD;border-right-style:solid;border-right-width:1pt;border-right-color:#DDDDDD" bgcolor="#007D39"><p class="s16" style="padding-top: 4pt;padding-left: 36pt;padding-right: 35pt;text-indent: 0pt;text-align: center;">Line No.</p></td><td style="width:391pt;border-top-style:solid;border-top-width:1pt;border-top-color:#DDDDDD;border-left-style:solid;border-left-width:1pt;border-left-color:#DDDDDD;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#DDDDDD;border-right-style:solid;border-right-width:1pt;border-right-color:#DDDDDD" bgcolor="#007D39"><p class="s16" style="padding-top: 11pt;text-indent: 0pt;text-align: center;">Description</p></td></tr><tr style="height:93pt"><td style="width:107pt;border-top-style:solid;border-top-width:1pt;border-top-color:#DDDDDD;border-left-style:solid;border-left-width:1pt;border-left-color:#DDDDDD;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#DDDDDD;border-right-style:solid;border-right-width:1pt;border-right-color:#DDDDDD"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s17" style="padding-left: 6pt;text-indent: 0pt;text-align: left;">1</p></td><td style="width:391pt;border-top-style:solid;border-top-width:1pt;border-top-color:#DDDDDD;border-left-style:solid;border-left-width:1pt;border-left-color:#DDDDDD;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#DDDDDD;border-right-style:solid;border-right-width:1pt;border-right-color:#DDDDDD"><p style="text-indent: 0pt;text-align: left;"><span><img width="109" height="20" alt="image" src="Image_775.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="172" height="43" alt="image" src="Image_776.png"/></span></p><p class="s17" style="padding-top: 8pt;padding-left: 6pt;padding-right: 12pt;text-indent: 0pt;line-height: 148%;text-align: left;">Some commands (i.e., <span class="s22">program_hex_file </span>) are device-specific and are, therefore, in a special <span class="s22">ac7t1500:: </span>namespace. Thus, the command would be called as:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="147" height="20" alt="image" src="Image_777.png"/></span></p><p class="s17" style="padding-left: 6pt;padding-right: 12pt;text-indent: 0pt;line-height: 111%;text-align: left;">&quot; <span class="s22">ac7t1500::program_hex_file </span>&quot;. As a convenience, the <span class="s22">use_device_namespace </span>command imports commands from the namespace, so that the namespace prefix can be omitted.</p></td></tr><tr style="height:41pt"><td style="width:107pt;border-top-style:solid;border-top-width:1pt;border-top-color:#DDDDDD;border-left-style:solid;border-left-width:1pt;border-left-color:#DDDDDD;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#DDDDDD;border-right-style:solid;border-right-width:1pt;border-right-color:#DDDDDD"><p class="s17" style="padding-top: 11pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">2</p></td><td style="width:391pt;border-top-style:solid;border-top-width:1pt;border-top-color:#DDDDDD;border-left-style:solid;border-left-width:1pt;border-left-color:#DDDDDD;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#DDDDDD;border-right-style:solid;border-right-width:1pt;border-right-color:#DDDDDD"><p class="s17" style="padding-top: 5pt;padding-left: 6pt;padding-right: 12pt;text-indent: 0pt;text-align: left;">This command establishes that the ACX_DEVICE_MANAGER is used for JTAG communication and must be issued before programming the FPGA.</p></td></tr><tr style="height:87pt"><td style="width:107pt;border-top-style:solid;border-top-width:1pt;border-top-color:#DDDDDD;border-left-style:solid;border-left-width:1pt;border-left-color:#DDDDDD;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#DDDDDD;border-right-style:solid;border-right-width:1pt;border-right-color:#DDDDDD"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s17" style="padding-left: 6pt;text-indent: 0pt;text-align: left;">3</p></td><td style="width:391pt;border-top-style:solid;border-top-width:1pt;border-top-color:#DDDDDD;border-left-style:solid;border-left-width:1pt;border-left-color:#DDDDDD;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#DDDDDD;border-right-style:solid;border-right-width:1pt;border-right-color:#DDDDDD"><p style="text-indent: 0pt;text-align: left;"><span><img width="54" height="20" alt="image" src="Image_778.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="70" height="20" alt="image" src="Image_779.png"/></span></p><p class="s17" style="padding-top: 5pt;padding-left: 6pt;text-indent: 0pt;line-height: 126%;text-align: left;">JTAG commands must have the name of the JTAG device driver. For most commands, this name is assumed to be in the global variable, <span class="s22">$jtag_id </span>. The <span class="s22">set_jtag_id </span>command finds the name of the device and sets the global variable. If there is more than one</p><p class="s17" style="padding-left: 6pt;text-indent: 0pt;line-height: 9pt;text-align: left;">device (not common), it lists the possible choices. In such cases, or alternatively, the</p><p style="text-indent: 0pt;text-align: left;"><span><img width="46" height="20" alt="image" src="Image_780.png"/></span></p><p class="s22" style="padding-top: 4pt;padding-left: 9pt;text-indent: 0pt;text-align: left;">jtag_id <span class="s17">variable can be assigned manually.</span></p></td></tr><tr style="height:51pt"><td style="width:107pt;border-top-style:solid;border-top-width:1pt;border-top-color:#DDDDDD;border-left-style:solid;border-left-width:1pt;border-left-color:#DDDDDD;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#DDDDDD;border-right-style:solid;border-right-width:1pt;border-right-color:#DDDDDD"><p style="padding-top: 4pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s17" style="padding-left: 6pt;text-indent: 0pt;text-align: left;">4</p></td><td style="width:391pt;border-top-style:solid;border-top-width:1pt;border-top-color:#DDDDDD;border-left-style:solid;border-left-width:1pt;border-left-color:#DDDDDD;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#DDDDDD;border-right-style:solid;border-right-width:1pt;border-right-color:#DDDDDD"><p style="text-indent: 0pt;text-align: left;"><span><img width="90" height="43" alt="image" src="Image_781.png"/></span></p><p class="s17" style="padding-top: 8pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">The <span class="s22">open_jtag </span>command establishes the connection with the JTAG driver. A</p><p class="s22" style="padding-top: 5pt;padding-left: 9pt;text-indent: 0pt;text-align: left;">close_jtag <span class="s17">command is also provided.</span></p></td></tr></table><p style="padding-top: 5pt;text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:6.065pt" cellspacing="0"><tr style="height:43pt"><td style="width:107pt;border-top-style:solid;border-top-width:1pt;border-top-color:#DDDDDD;border-left-style:solid;border-left-width:1pt;border-left-color:#DDDDDD;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#DDDDDD;border-right-style:solid;border-right-width:1pt;border-right-color:#DDDDDD" bgcolor="#007D39"><p class="s16" style="padding-top: 5pt;padding-left: 36pt;padding-right: 35pt;text-indent: 0pt;text-align: center;">Line No.</p></td><td style="width:391pt;border-top-style:solid;border-top-width:1pt;border-top-color:#DDDDDD;border-left-style:solid;border-left-width:1pt;border-left-color:#DDDDDD;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#DDDDDD;border-right-style:solid;border-right-width:1pt;border-right-color:#DDDDDD" bgcolor="#007D39"><p class="s16" style="padding-top: 11pt;text-indent: 0pt;text-align: center;">Description</p></td></tr><tr style="height:69pt"><td style="width:107pt;border-top-style:solid;border-top-width:1pt;border-top-color:#DDDDDD;border-left-style:solid;border-left-width:1pt;border-left-color:#DDDDDD;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#DDDDDD;border-right-style:solid;border-right-width:1pt;border-right-color:#DDDDDD"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s17" style="padding-left: 6pt;text-indent: 0pt;text-align: left;">5</p></td><td style="width:391pt;border-top-style:solid;border-top-width:1pt;border-top-color:#DDDDDD;border-left-style:solid;border-left-width:1pt;border-left-color:#DDDDDD;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#DDDDDD;border-right-style:solid;border-right-width:1pt;border-right-color:#DDDDDD"><p style="text-indent: 0pt;text-align: left;"><span><img width="108" height="20" alt="image" src="Image_782.png"/></span></p><p class="s17" style="padding-top: 8pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">The <span class="s22">program_hex_file </span>command programs the FPGA via the JTAG interface. The full</p><p style="text-indent: 0pt;text-align: left;"><span><img width="176" height="20" alt="image" src="Image_783.png"/></span></p><p class="s17" style="padding-top: 5pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">path name of the hex file must be specified (typically: <span class="s22">&lt;userdesign&gt;/impl_1/output/</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="81" height="20" alt="image" src="Image_784.png"/></span></p><p class="s22" style="padding-top: 5pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">&lt;design&gt;.hex <span class="s17">).</span></p></td></tr><tr style="height:58pt"><td style="width:107pt;border-top-style:solid;border-top-width:1pt;border-top-color:#DDDDDD;border-left-style:solid;border-left-width:1pt;border-left-color:#DDDDDD;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#DDDDDD;border-right-style:solid;border-right-width:1pt;border-right-color:#DDDDDD"><p style="padding-top: 8pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s17" style="padding-left: 6pt;text-indent: 0pt;text-align: left;">6</p></td><td style="width:391pt;border-top-style:solid;border-top-width:1pt;border-top-color:#DDDDDD;border-left-style:solid;border-left-width:1pt;border-left-color:#DDDDDD;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#DDDDDD;border-right-style:solid;border-right-width:1pt;border-right-color:#DDDDDD"><p style="text-indent: 0pt;text-align: left;"><span><img width="158" height="20" alt="image" src="Image_785.png"/></span></p><p class="s17" style="padding-top: 5pt;padding-left: 6pt;padding-right: 10pt;text-indent: 0pt;line-height: 126%;text-align: justify;">The preceeding sequence of commands can be used for any design, independent of the ACX_DEVICE_MANAGER (except for the <span class="s22">use_acx_device_manager </span>command on line 2).</p></td></tr><tr style="height:46pt"><td style="width:107pt;border-top-style:solid;border-top-width:1pt;border-top-color:#DDDDDD;border-left-style:solid;border-left-width:1pt;border-left-color:#DDDDDD;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#DDDDDD;border-right-style:solid;border-right-width:1pt;border-right-color:#DDDDDD"><p style="padding-top: 2pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s17" style="padding-left: 6pt;text-indent: 0pt;text-align: left;">7</p></td><td style="width:391pt;border-top-style:solid;border-top-width:1pt;border-top-color:#DDDDDD;border-left-style:solid;border-left-width:1pt;border-left-color:#DDDDDD;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#DDDDDD;border-right-style:solid;border-right-width:1pt;border-right-color:#DDDDDD"><p style="text-indent: 0pt;text-align: left;"><span><img width="57" height="20" alt="image" src="Image_786.png"/></span></p><p class="s17" style="padding-top: 8pt;padding-left: 6pt;padding-right: 12pt;text-indent: 0pt;line-height: 118%;text-align: left;">The <span class="s22">package </span>command loads a set of Tcl macros into ACE. It must be issued at least once, but using it multiple times is harmless.</p></td></tr><tr style="height:46pt"><td style="width:107pt;border-top-style:solid;border-top-width:1pt;border-top-color:#DDDDDD;border-left-style:solid;border-left-width:1pt;border-left-color:#DDDDDD;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#DDDDDD;border-right-style:solid;border-right-width:1pt;border-right-color:#DDDDDD"><p style="padding-top: 2pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s17" style="padding-left: 6pt;text-indent: 0pt;text-align: left;">8</p></td><td style="width:391pt;border-top-style:solid;border-top-width:1pt;border-top-color:#DDDDDD;border-left-style:solid;border-left-width:1pt;border-left-color:#DDDDDD;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#DDDDDD;border-right-style:solid;border-right-width:1pt;border-right-color:#DDDDDD"><p style="text-indent: 0pt;text-align: left;"><span><img width="76" height="20" alt="image" src="Image_787.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="58" height="20" alt="image" src="Image_788.png"/></span></p><p class="s17" style="padding-top: 8pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">The <span class="s22">mcu_status </span>command displays the status of the device manager <span class="s22">o_status</span></p><p class="s17" style="padding-top: 2pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">output. Details are provided in the following section.</p></td></tr></table><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 2pt;text-align: left;"><span><img width="665" height="2" alt="image" src="Image_789.png"/></span></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part130.htm">&lt; Previous</a><span> | </span><a href="../Speedster7t_Soft_IP_User_Guide_UG103_3.html">Contents</a><span> | </span><a href="part132.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
